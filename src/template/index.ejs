<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stack Browser Simulator</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
</head>
<body>

    <div class="browser-window">
        <div class="toolbar">
            
            <form action="/back" method="post">
                <button type="submit" class="nav-btn" title="Voltar" <% if (!canBack) { %> disabled <% } %>>
                    <span class="material-icons">arrow_back</span>
                </button>
            </form>

            <form action="/forward" method="post">
                <button type="submit" class="nav-btn" title="Avançar" <% if (!canForward) { %> disabled <% } %>>
                    <span class="material-icons">arrow_forward</span>
                </button>
            </form>

            <button class="nav-btn" onclick="window.location.reload()">
                <span class="material-icons">refresh</span>
            </button>

            <form action="/search" method="post" class="address-container">
                <span class="material-icons search-icon">search</span>
                <input type="text" name="term" class="url-input" placeholder="Digite uma URL ou termo de pesquisa..." autocomplete="off" required 
                       value="<%= (page && page.title && page.title.includes('Resultados')) ? page.title.replace('Resultados de busca para ', '') : '' %>">
            </form>

            <button class="nav-btn">
                <span class="material-icons">more_vert</span>
            </button>
        </div>

        <div class="viewport">
            <% if (page) { %>

                <% page.content.forEach(result => { %>
                    <div class="result-card">
                        <span class="result-url"><%= result.url %></span>
                        <a href="<%= result.url %>" class="result-title"><%= result.title %></a>
                        <p class="result-snippet"><%= result.snippet %></p>
                    </div>
                <% }) %>

            <% } else { %>
                <div class="empty-state">
                    <span class="material-icons">public</span>
                    <h2>Navegador Simulado</h2>
                    <p>Digite algo na barra acima para começar a navegar na web.</p>
                </div>
            <% } %>
        </div>
    </div>

</body>
</html>